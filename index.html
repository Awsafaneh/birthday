<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>هدية عيد ميلاد خاصة</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Tajawal:wght@400;700&display=swap');

        body {
            font-family: 'Tajawal', 'Cairo', sans-serif;
            background: linear-gradient(135deg, #fce4ec, #f8bbd0); /* Light to Medium Pink */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
            position: relative;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            padding: 30px 40px;
            text-align: center;
            max-width: 450px;
            width: 90%;
            position: relative;
            z-index: 10;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out, visibility 0s 0.5s; /* Delay visibility change */
        }
        
        .hidden {
            opacity: 0;
            visibility: hidden;
            transform: scale(0.9) translateY(20px);
            position: absolute; /* Take out of flow when hidden to prevent overlap */
            left: -9999px; /* Move off-screen */
        }
        
        .visible {
            opacity: 1;
            visibility: visible;
            transform: scale(1) translateY(0);
            position: static; /* Bring back into normal flow */
            left: auto;
        }


        h2 {
            color: #c2185b; /* Deep Pink */
            margin-bottom: 20px;
        }

        p {
            color: #555;
            font-size: 1.1em;
            line-height: 1.6;
        }

        button {
            background-color: #e91e63; /* Bright Pink */
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.1em;
            font-family: 'Cairo', sans-serif;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            margin-top: 15px;
        }

        button:hover {
            background-color: #c2185b; /* Darker Pink on hover */
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }

        input[type="password"], input[type="text"] {
            padding: 10px;
            margin-top: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: calc(100% - 22px); /* Account for padding */
            font-size: 1em;
            text-align: center;
        }

        #password-error {
            color: red;
            font-size: 0.9em;
            margin-top: 5px;
            min-height: 1.2em; /* Reserve space to prevent layout shift */
        }

        .gift-box {
            width: 150px;
            height: 150px;
            background-color: #d81b60; /* Medium-Dark Pink */
            margin: 20px auto;
            position: relative;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .gift-box:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .gift-box::before { /* Lid */
            content: '';
            position: absolute;
            width: 170px;
            height: 40px;
            background-color: #c2185b; /* Darker Pink */
            top: -25px; /* Adjusted for better overlap */
            left: -10px;
            border-radius: 5px;
            box-shadow: 0 -3px 5px rgba(0,0,0,0.1);
        }

        .gift-box::after { /* Ribbon vertical */
            content: '';
            position: absolute;
            width: 25px;
            height: 100%;
            background-color: #f06292; /* Lighter Pink */
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }
        
        .bow {
            width: 30px;
            height: 30px;
            background-color: #f06292;
            border-radius: 50%;
            position: absolute;
            top: -45px; /* Position on top of the lid */
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .bow::before, .bow::after { /* Bow loops */
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            background-color: #f06292;
            border-radius: 0 15px 0 15px; /* Loop shape */
        }
        .bow::before {
            transform: translateX(-12px) rotate(-30deg);
        }
        .bow::after {
            transform: translateX(12px) rotate(30deg);
        }


        .greeting-message .name {
            font-size: 2em;
            color: #880e4f; /* Darkest Pink */
            font-weight: 700;
            margin: 15px 0 10px;
        }
        .greeting-message .date-text {
            font-size: 1.2em;
            color: #6d6d6d;
            margin-bottom: 20px;
        }
        .greeting-message .final-greeting {
            font-size: 1.4em;
            color: #c2185b;
            font-weight: bold;
        }
        
        /* Particles (same as before) */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 1;
        }
        .particle {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            opacity: 0;
            animation-name: float-up;
            animation-timing-function: linear;
            animation-iteration-count: infinite;
        }
        @keyframes float-up {
            0% { transform: translateY(0vh); opacity: 0; }
            10%, 90% { opacity: 0.8; }
            100% { transform: translateY(-110vh); opacity: 0; }
        }

    </style>
</head>
<body>
    <div class="particles" id="particle-container"></div>

    <div id="initial-prompt" class="container visible">
        <h2>هدية خاصة لكِ!</h2>
        <p>هناك مفاجأة بانتظارك. اضغطي لفتح الهدية.</p>
        <button id="open-gift-button">🎁 افتح الهدية 🎁</button>
    </div>

    <div id="password-section" class="container hidden">
        <h2>إدخال كلمة المرور</h2>
        <p>الرجاء إدخال كلمة المرور لفتح الهدية:</p>
        <input type="password" id="password-input" placeholder="كلمة المرور">
        <div id="password-error"></div>
        <button id="submit-password-button">إرسال</button>
    </div>

    <div id="gift-box-section" class="container hidden">
        <h2>لقد تم فتح القفل!</h2>
        <p>اضغطي على الصندوق لتكشفي عن المفاجأة...</p>
        <div class="gift-box" id="gift-box-visual">
            <div class="bow"></div>
        </div>
    </div>

    <div id="greeting-message-section" class="container hidden greeting-message">
        <p class="final-greeting">كل عام وأنتِ بخير</p>
        <p class="recipient-text" style="font-size: 1.5em; color: #ad1457; margin-bottom:10px;">أمي الغالية</p>
        <h1 class="name">آلاء نوفل</h1>
        <p class="date-text">٩ / ٥ / ١٩٨٧</p>
        <p style="font-size:1.3em; color: #e91e63; margin-top:20px;">💖 مع كل الحب 💖</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const openGiftButton = document.getElementById('open-gift-button');
            const submitPasswordButton = document.getElementById('submit-password-button');
            const giftBoxVisual = document.getElementById('gift-box-visual');

            const initialPrompt = document.getElementById('initial-prompt');
            const passwordSection = document.getElementById('password-section');
            const giftBoxSection = document.getElementById('gift-box-section');
            const greetingMessageSection = document.getElementById('greeting-message-section');
            
            const passwordInput = document.getElementById('password-input');
            const passwordError = document.getElementById('password-error');

            const correctPassword = "1987";

            function switchSection(hideSection, showSection) {
                if (hideSection) {
                    hideSection.classList.remove('visible');
                    hideSection.classList.add('hidden');
                }
                
                // Wait for the hide transition to complete (or nearly complete) before showing the next section
                setTimeout(() => {
                    if (showSection) {
                        showSection.classList.remove('hidden');
                        showSection.classList.add('visible');
                    }
                }, hideSection ? 400 : 0); // 400ms aligns with CSS transition, 0 if no hide
            }


            openGiftButton.addEventListener('click', () => {
                switchSection(initialPrompt, passwordSection);
            });

            submitPasswordButton.addEventListener('click', () => {
                if (passwordInput.value === correctPassword) {
                    passwordError.textContent = '';
                    switchSection(passwordSection, giftBoxSection);
                } else {
                    passwordError.textContent = 'كلمة السر خاطئة، حاول مرة أخرى.';
                    passwordInput.focus();
                    // Add a little shake animation for error
                    passwordSection.classList.add('shake-error');
                    setTimeout(() => passwordSection.classList.remove('shake-error'), 500);
                }
            });
            
            // Allow Enter key to submit password
            passwordInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    event.preventDefault(); 
                    submitPasswordButton.click();
                }
            });

            giftBoxVisual.addEventListener('click', () => {
                switchSection(giftBoxSection, greetingMessageSection);
            });

            // Particle effect
            const particleContainer = document.getElementById('particle-container');
            if (particleContainer) {
                const numParticles = 50;
                for (let i = 0; i < numParticles; i++) {
                    let particle = document.createElement('div');
                    particle.classList.add('particle');
                    const size = Math.random() * 8 + 3; 
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.top = `${Math.random() * 100 + 100}vh`; 
                    
                    const animationDuration = Math.random() * 15 + 10; 
                    const animationDelay = Math.random() * 15;

                    particle.style.animationDuration = `${animationDuration}s`;
                    particle.style.animationDelay = `${animationDelay}s`;
                    particleContainer.appendChild(particle);
                }
            }

            // CSS for shake animation (optional, add to <style> if you want it)
            // You might need to inject this into the <style> or create a separate class
            const styleSheet = document.createElement("style");
            styleSheet.type = "text/css";
            styleSheet.innerText = `
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                    20%, 40%, 60%, 80% { transform: translateX(5px); }
                }
                .shake-error {
                    animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
                }
            `;
            document.head.appendChild(styleSheet);
        });
    </script>
    <!--
    ملاحظات:
    1.  انسخ هذا الكود كاملاً والصقه في ملف جديد بامتداد .html (مثال: interactive_gift_card.html) على جهازك.
    2.  ارفعه إلى خادم الويب الخاص بموقعك (smmnpan.online).
    3.  الخلفية والجزيئات المتحركة مشابهة للبطاقة السابقة.
    4.  تم تصميم "صندوق الهدية" بشكل مبسط باستخدام CSS.
    5.  عند إدخال كلمة مرور خاطئة، ستظهر رسالة خطأ وسيهتز حقل كلمة المرور قليلاً.
    6.  يمكنك تعديل النصوص والألوان بسهولة في HTML و CSS.
    -->
</body>
</html>
